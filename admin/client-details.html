<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Client Details</title>

  <link rel="stylesheet" href="../css/layout.css">
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="stylesheet" href="../css/users.css">
  <link rel="stylesheet" href="../css/sidebar.css">

  <style>
    .um-actions-row{
      display:flex;
      gap:10px;
      justify-content:flex-end;
      flex-wrap:wrap;
      margin-bottom:14px;
    }
    .um-grid{
      display:grid;
      grid-template-columns: .8fr 1.2fr;
      gap:14px;
    }
    @media (max-width: 980px){
      .um-grid{ grid-template-columns: 1fr; }
    }
    .um-field{
      display:flex;
      flex-direction:column;
      gap:6px;
      margin-bottom:10px;
    }
    .um-field input, .um-field select{ width:100%; }

    .um-card__head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .um-card__head .um-card__title{ margin:0; }
    .um-card__head-actions{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .um-table-mini{
      width:100%;
      border-collapse:collapse;
    }
    .um-table-mini th,
    .um-table-mini td{
      padding:10px 8px;
      border-bottom:1px solid rgba(255,255,255,.08);
      text-align:left;
      vertical-align:middle;
    }
    .um-table-mini th{
      font-weight:600;
      opacity:.85;
      font-size:12px;
      text-transform:uppercase;
      letter-spacing:.04em;
    }
    .um-table-mini td:last-child,
    .um-table-mini th:last-child{
      text-align:left;
      white-space:nowrap;
    }

    .um-inline-input{
      min-width:90px;
      max-width:140px;
    }

    .um-two-col{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width: 560px){
      .um-two-col{ grid-template-columns:1fr; }
    }

    /* Discount inline editor */
    .um-discount-wrap{
      display:inline-flex;
      gap:8px;
      align-items:center;
      justify-content:flex-end;
      width:100%;
    }
    .um-discount-inline{
      display:inline-flex;
      gap:8px;
      align-items:center;
      justify-content:flex-end;
    }
    .um-discount-input{
      width:90px;
      min-width:90px;
    }
    .um-discount-select{
      width:70px;
      min-width:70px;
    }
    .um-cell-actions{
      display:inline-flex;
      gap:10px;
      align-items:center;
      justify-content:flex-end;
      width:100%;
    }
    .um-muted{
      opacity:.8;
    }

    /* ===== General Balance toggle row ===== */
    .um-setting-row{
      margin-top:10px;
      padding-top:10px;
      border-top:1px solid rgba(255,255,255,.08);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .um-setting-row__left{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .um-setting-row__label{
      font-weight:600;
      opacity:.95;
    }
    .um-setting-row__hint{
      font-size:12px;
      opacity:.75;
    }

    .um-switch{
      display:inline-flex;
      align-items:center;
      gap:10px;
      user-select:none;
    }
    .um-switch input{
      position:absolute;
      opacity:0;
      pointer-events:none;
    }
    .um-switch__track{
      width:46px;
      height:26px;
      border-radius:999px;
      background: rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.10);
      position:relative;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.08);
      transition: transform .15s ease, background .15s ease;
    }
    .um-switch__knob{
      width:20px;
      height:20px;
      border-radius:999px;
      background:#fff;
      position:absolute;
      top:50%;
      left:3px;
      transform:translateY(-50%);
      transition:left .15s ease;
      box-shadow: 0 6px 16px rgba(0,0,0,.20);
    }
    .um-switch input:checked + .um-switch__track .um-switch__knob{
      left:23px;
    }
    .um-switch input:checked + .um-switch__track{
      background: rgba(16,185,129,.28);
      border-color: rgba(16,185,129,.35);
    }
    .um-switch--disabled{
      opacity:.55;
      cursor:not-allowed;
    }
    .um-switch--disabled .um-switch__track{
      filter:grayscale(1);
    }

    .um-lock{
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-size:12px;
      opacity:.75;
      white-space:nowrap;
    }
    .um-dot{
      width:8px; height:8px; border-radius:50%;
      background: rgba(255,255,255,.35);
      display:inline-block;
    }

    /* ===== Tab System ===== */
    .um-tab-content {
      display: none;
    }
    
    .um-tab-content.active {
      display: block;
    }

    /* ===== Billing Address Cards ===== */
    .billing-address-card {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 12px;
      transition: all 0.2s ease;
    }

    .billing-address-card:hover {
      background: rgba(255,255,255,0.05);
      border-color: rgba(255,255,255,0.12);
    }

    .billing-address-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .billing-address-title {
      font-weight: 600;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .billing-address-actions {
      display: flex;
      gap: 8px;
    }

    .billing-address-body {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      font-size: 13px;
    }

    .billing-address-field {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .billing-address-label {
      opacity: 0.6;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .billing-address-value {
      opacity: 0.95;
    }

    @media (max-width: 768px) {
      .billing-address-body {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>
  <div class="layout">
    <header class="header">
      <h1>Client Details</h1>
      <div class="user-info">
        <span>Admin User</span>
        <div class="user-avatar">AU</div>
      </div>
    </header>

    <aside class="sidebar" id="sidebar"></aside>

    <main class="main">
      <div class="content-section">

        <div class="um-actions-row">
          <button class="um-btn um-btn--ghost" type="button" id="backBtn">‚Üê Back</button>
        </div>

        <!-- Profile Header (always visible) -->
        <div class="um-card um-profile" style="margin-bottom:20px;">
          <div class="um-avatar" id="avatar">CL</div>
          <div class="um-profile__meta">
            <div class="um-profile__name" id="nameText">‚Äî</div>
            <div class="um-profile__company" id="companyText">‚Äî</div>
            <div class="um-profile__status" id="statusText">‚Äî</div>
            <div class="um-profile__company" style="margin-top:6px;" id="idText">#‚Äî</div>
          </div>
        </div>

        <!-- Tabs Navigation -->
        <div class="um-tabs">
          <button class="um-tab active" data-tab="account">Account Information</button>
          <button class="um-tab" data-tab="team">Team</button>
          <button class="um-tab" data-tab="fees">Fees</button>
          <button class="um-tab" data-tab="thresholds">Notification Thresholds</button>
        </div>

        <!-- Tab: Account Information -->
        <div class="um-tab-content active" id="tab-account">
          <div class="um-actions-row">
            <button class="um-btn" type="button" id="editBtn">Edit Profile</button>
            <button class="um-btn um-btn--ghost" type="button" id="saveBtn" hidden>Save</button>
            <button class="um-btn um-btn--ghost" type="button" id="cancelBtn" hidden>Cancel</button>
          </div>

          <!-- Contact Information Card -->
          <div class="um-card" style="margin-bottom:20px;">
            <div class="um-card__title">Contact Information</div>

            <!-- view mode -->
            <div class="um-info" id="viewBlock">
              <div class="um-info__row">
                <span class="um-info__label">üì± Telegram</span>
                <span class="um-info__value" id="telegramText">‚Äî</span>
              </div>
              <div class="um-info__row">
                <span class="um-info__label">‚úâÔ∏è Email</span>
                <span class="um-info__value" id="emailText">‚Äî</span>
              </div>
              <div class="um-info__row">
                <span class="um-info__label">üìû Phone</span>
                <span class="um-info__value" id="phoneText">‚Äî</span>
              </div>
            </div>

            <!-- edit mode -->
            <div id="editBlock" hidden style="margin-top:10px;">
              <div class="um-field">
                <label class="um-info__label">Name</label>
                <input class="um-input" id="nameInput" />
              </div>
              <div class="um-field">
                <label class="um-info__label">Company</label>
                <input class="um-input" id="companyInput" />
              </div>
              <div class="um-field">
                <label class="um-info__label">Telegram</label>
                <input class="um-input" id="telegramInput" />
              </div>
              <div class="um-field">
                <label class="um-info__label">Email</label>
                <input class="um-input" id="emailInput" type="email" />
              </div>
              <div class="um-field">
                <label class="um-info__label">Phone</label>
                <input class="um-input" id="phoneInput" />
              </div>
              <div class="um-field">
                <label class="um-info__label">Status</label>
                <select class="um-select" id="statusInput">
                  <option value="Active">Active</option>
                  <option value="Pending">Pending</option>
                  <option value="Inactive">Inactive</option>
                  <option value="Maintenance">Maintenance</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Billing Addresses Card -->
          <div class="um-card">
            <div class="um-card__head">
              <div class="um-card__title">Billing Addresses</div>
              <div class="um-card__head-actions">
                <button class="um-btn um-btn--ghost" type="button" id="addAddressBtn">+ Add Address</button>
              </div>
            </div>

            <div id="billingAddressesList">
              <!-- Addresses will be rendered here -->
            </div>
          </div>
        </div>
        <!-- End Tab: Account Information -->

        <!-- Tab: Team -->
        <div class="um-tab-content" id="tab-team">
          <div class="um-card" id="employeesCard2">
            <div class="um-card__head" style="margin-bottom:10px;">
              <div class="um-card__title">Employees</div>
              <div class="um-card__head-actions">
                <span class="um-badge um-badge--gray" id="employeesCount2">0</span>
              </div>
            </div>

            <div class="um-table-wrap" style="padding:0; background:transparent;">
              <table class="um-table-mini" aria-label="Employees table">
                <thead>
                  <tr>
                    <th>Full Name</th>
                    <th>Created</th>
                  </tr>
                </thead>
                <tbody id="employeesBody2"></tbody>
              </table>
            </div>

            <div class="um-muted" id="employeesHint2" style="margin-top:8px;">‚Äî</div>
          </div>
        </div>
        <!-- End Tab: Team -->

        <!-- Tab: Fees -->
        <div class="um-tab-content" id="tab-fees">
          <!-- Network Fees -->
          <div class="um-card" id="feesBlock" style="margin-bottom:20px;">
            <div class="um-card__head">
              <div class="um-card__title">Network Fees</div>
              <div class="um-card__head-actions">
                <button class="um-btn um-btn--ghost" type="button" id="netEditBtn">Edit</button>
                <button class="um-btn um-btn--ghost" type="button" id="netSaveBtn" hidden>Save</button>
                <button class="um-btn um-btn--ghost" type="button" id="netCancelBtn" hidden>Cancel</button>
              </div>
            </div>

            <!-- view -->
            <div id="netView" class="um-two-col">
              <div class="um-list">
                <div class="um-list__item">
                  <span>ERC Fee</span>
                  <strong id="ercFeeText">‚Äî</strong>
                </div>
              </div>
              <div class="um-list">
                <div class="um-list__item">
                  <span>TRC Fee</span>
                  <strong id="trcFeeText">‚Äî</strong>
                </div>
              </div>
            </div>

            <!-- edit -->
            <div id="netEdit" hidden class="um-two-col" style="margin-top:10px;">
              <div class="um-field" style="margin-bottom:0;">
                <input class="um-input um-inline-input" id="ercFeeInput" inputmode="decimal" placeholder="0" />
              </div>
              <div class="um-field" style="margin-bottom:0;">
                <input class="um-input um-inline-input" id="trcFeeInput" inputmode="decimal" placeholder="0" />
              </div>
            </div>
          </div>

          <div class="um-actions-row">
            <button class="um-btn um-btn--ghost" type="button" id="feeEditBtn">Edit</button>
            <button class="um-btn um-btn--ghost" type="button" id="feeSaveBtn" hidden>Save</button>
            <button class="um-btn um-btn--ghost" type="button" id="feeCancelBtn" hidden>Cancel</button>
          </div>

          <!-- Fee Table -->
          <div class="um-card" id="feeCard">
            <div class="um-card__head">
              <div class="um-card__title">Fee Configuration</div>
            </div>

              <div class="um-table-wrap" style="padding:0; background:transparent;">
                <table class="um-table-mini" aria-label="Fee table">
                  <thead>
                    <tr>
                      <th>Account Type</th>
                      <th>Page Setup</th>
                      <th>Init Interval</th>
                      <th>Init Amount</th>
                      <th>Rec Interval</th>
                      <th>Rec Amount</th>
                      <th>Fee</th>
                      <th>Payment Day</th>
                      <th>General Balance</th>
                    </tr>
                  </thead>
                  <tbody id="feeBody"></tbody>
                </table>
              </div>
            </div>
        </div>
        <!-- End Tab: Fees -->

        <!-- Tab: Notification Thresholds -->
        <div class="um-tab-content" id="tab-thresholds">
          <div class="um-actions-row">
            <button class="um-btn um-btn--ghost" type="button" id="thresholdEditBtn">Edit</button>
            <button class="um-btn um-btn--ghost" type="button" id="thresholdSaveBtn" hidden>Save</button>
            <button class="um-btn um-btn--ghost" type="button" id="thresholdCancelBtn" hidden>Cancel</button>
          </div>

          <!-- Notification Thresholds -->
          <div class="um-card" id="thresholdsCard">
              <div class="um-card__head">
                <div class="um-card__title">Notification Thresholds</div>
              </div>

              <div class="um-muted" style="margin-bottom:12px; font-size:13px;">
                Set spending limits per platform. Admin will be notified when client exceeds these amounts.
              </div>

              <div class="um-table-wrap" style="padding:0; background:transparent;">
                <table class="um-table-mini" aria-label="Notification thresholds table">
                  <thead>
                    <tr>
                      <th>Platform</th>
                      <th style="text-align:right;">Threshold Amount</th>
                    </tr>
                  </thead>
                  <tbody id="thresholdsBody"></tbody>
                </table>
              </div>
          </div>

          <div class="um-card" id="notFound" hidden>
              <div class="um-card__title">Client not found</div>
              <p style="margin:0; opacity:.8;">
                Nu am gƒÉsit date pentru acest client. √éntoarce-te la listƒÉ »ôi apasƒÉ ‚ÄúView‚Äù din nou.
              </p>
          </div>
        </div>
        <!-- End Tab: Notification Thresholds -->

      </div>
    </main>
  </div>

  <script src="../js/admin-client-details.js"></script>
  <script src="../js/sidebar.js"></script>
</body>
</html>